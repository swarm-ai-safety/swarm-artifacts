# Hypothesis: Quadratic staking solves sybil cost inversion
#
# Tests claim-quadratic-staking-may-solve-sybil-cost-inversion.
# Current flat staking hurts honest agents more than adversarial
# (d=0.41, p=0.37 from claim-staking-backfires). Quadratic staking
# should impose N^2 costs on sybil controllers while leaving single-
# identity agents at cost N=1.
#
# Design: 2x3 factorial.
#   Factor 1: Staking type (flat, quadratic, cubic)
#   Factor 2: Sybil attack (none, 3-identity, 5-identity)
# Measure: honest payoff, sybil payoff, sybil success rate, welfare.
#
# Falsification: If quadratic staking still hurts honest agents more
# than sybil controllers, the cost inversion persists regardless of
# staking function.

scenario_id: hypothesis_quadratic_staking
description: "Compare flat vs quadratic vs cubic staking against sybil attacks"
motif: "Super-linear sybil cost structure"
hypothesis: claim-quadratic-staking-may-solve-sybil-cost-inversion

agents:
  - type: honest
    count: 6
  - type: adversarial
    count: 2

governance:
  transaction_tax_rate: 0.03
  circuit_breaker_enabled: true
  freeze_threshold_toxicity: 0.6
  freeze_threshold_violations: 3
  freeze_duration_epochs: 3
  audit_enabled: true
  audit_probability: 0.10
  collusion_detection_enabled: true
  collusion_correlation_threshold: 0.6

network:
  topology: small_world
  params:
    k: 4
    p: 0.15
  dynamic: false

simulation:
  n_epochs: 20
  steps_per_epoch: 10

sweep:
  type: factorial
  seeds: [42, 7, 123, 256, 999, 2024, 314, 577, 1337, 8080,
          11, 22, 33, 44, 55, 66, 77, 88, 99, 100]
  parameters:
    governance.staking_enabled: [true]
    governance.staking_function: [flat, quadratic, cubic]
    governance.min_stake_to_participate: [10.0]
    redteam.sybil_identities: [0, 3, 5]

payoff:
  s_plus: 3.0
  s_minus: 1.5
  h: 3.0
  theta: 0.5
  w_rep: 2.5

analysis:
  primary_metrics:
    - honest_payoff: "Mean payoff for honest agents"
    - sybil_payoff: "Mean payoff across sybil controller identities"
    - sybil_damage: "Total damage from sybil attack"
    - welfare: "System-wide welfare"
  comparison: two_way_anova_staking_x_sybil
  correction: bonferroni
  expected_effect: "quadratic/cubic staking reduces sybil_payoff without reducing honest_payoff"
  falsification: "honest_payoff still drops more than sybil_payoff under quadratic staking"

success_criteria:
  min_seeds: 20
  significance_level: 0.05
